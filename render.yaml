services:
  # Web Service - Main Flask Application with Built-in Background Alerts
  # Automated hourly alerts run as a background thread in the same service
  - type: web
    name: aegis-health-web
    env: python
    region: oregon  # Change to your preferred region (oregon, frankfurt, singapore, etc.)
    plan: free  # Change to 'starter' or 'standard' for production
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn "flask_app:app" --bind 0.0.0.0:$PORT --workers 2 --timeout 120
    envVars:
      - key: DEMO_SMS
        value: false
      - key: FLASK_ENV
        value: production
      - key: RENDER
        value: true  # Enables background alert thread
      - key: TWILIO_ACCOUNT_SID
        sync: false  # Set this manually in Render dashboard
      - key: TWILIO_AUTH_TOKEN
        sync: false  # Set this manually in Render dashboard
      - key: TWILIO_PHONE_NUMBER
        sync: false  # Set this manually in Render dashboard
